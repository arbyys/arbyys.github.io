import{d as D,u as S,r as A,v as T,c as m,w as l,a as s,e as k,o as g,b as u,I as M,f as t,h as N,i as Q,F as V,j as E,k as F,a1 as P,a5 as j,a6 as q,q as b,t as e,a7 as H,a8 as L,_ as R}from"./index-DUu03fhB.js";import{t as h}from"./Queries-CUH4f9ur.js";const W={id:"main"},$={class:"flex flex-wrap gap-4 mt-8"},z={class:"ml-2 opacity-60"},G={class:"mt-3"},J={class:"stats-table text-sm w-full"},K={class:"pr-1"},O={class:"text-right"},U={class:"pr-1"},X={class:"text-right"},Y={class:"pr-1"},Z={class:"text-right"},tt={class:"pr-1"},st={class:"text-right"},et=D({__name:"Stats",setup(at){const{t:c}=S(),_=k.getEvolu(),d=A(),v=T(()=>d.value?d.value.map(a=>{const n=a.infusions.length,o=n,w=a.infusions.reduce((i,r)=>{if(r.endedAt&&r.createdAt){const p=new Date(r.endedAt).getTime()-new Date(r.createdAt).getTime();return i+p}return i},0),I=n>0?w/1e3/n:0,f=a.infusions.reduce((i,r)=>i+r.brews.length,0),x=a.infusions.reduce((i,r)=>i+r.brews.reduce((p,B)=>p+(B.length??0),0),0),y=f>0?x/1e3/f:0,C=n>0?f/n:0;return{...a,stats:{total_infusions:Math.floor(o),average_infusion_duration:Math.floor(I/60),average_brew_duration:Math.floor(y),average_brews_per_infusion:Math.floor(C)}}}):null);return _.loadQuery(h).then(({rows:a})=>{d.value=a,console.log(v.value)}),_.subscribeQuery(h)(()=>{const{rows:a}=_.getQuery(h);d.value=a}),(a,n)=>(g(),m(s(F),null,{default:l(()=>[u(s(M)),u(s(E),{class:"ion-padding"},{default:l(()=>[t("main",W,[n[0]||(n[0]=t("h1",null,"Stats",-1)),t("div",$,[(g(!0),N(V,null,Q(v.value,o=>(g(),m(s(P),{color:"secondary",class:"px-2 py-1 w-[19rem]"},{default:l(()=>[u(s(j),null,{default:l(()=>[u(s(q),{class:"font-semibold"},{default:l(()=>[b(e(o.title),1)]),_:2},1024),u(s(H),{class:"opacity-75 font-normal"},{default:l(()=>[b(e(o.subtitle??"â€“")+" ",1),t("span",z,"("+e(s(c)(`tea_types.${o.typeName}`))+")",1)]),_:2},1024)]),_:2},1024),u(s(L),{class:"mt-0.5 border-t border-gray-500"},{default:l(()=>[t("div",G,[t("table",J,[t("tr",null,[t("td",K,e(s(c)("stats.total_infusions"))+":",1),t("td",O,e(o.stats.total_infusions),1)]),t("tr",null,[t("td",U,e(s(c)("stats.avg_brew_dur"))+":",1),t("td",X,e(o.stats.average_brew_duration)+"s",1)]),t("tr",null,[t("td",Y,e(s(c)("stats.avg_brews_per_infusion"))+":",1),t("td",Z,e(o.stats.average_brews_per_infusion),1)]),t("tr",null,[t("td",tt,e(s(c)("stats.avg_infusion_dur"))+":",1),t("td",st,e(o.stats.average_infusion_duration)+"s",1)])])])]),_:2},1024)]),_:2},1024))),256))])])]),_:1})]),_:1}))}}),rt=R(et,[["__scopeId","data-v-0cb786b1"]]);export{rt as default};
